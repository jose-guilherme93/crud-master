<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Documentation - Game Catalog</title>
    <style>
        :root {
            --bg-body: #0f172a;
            --bg-nav: #1e293b;
            --bg-card: #1e293b;
            --text-primary: #f8fafc;
            --text-secondary: #94a3b8;
            --border: #334155;
            --accent: #38bdf8;
            --method-get: #3b82f6;
            --method-post: #22c55e;
            --method-put: #f59e0b;
            --method-delete: #ef4444;
            --code-bg: #020617;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg-body);
            color: var(--text-primary);
            display: flex;
            height: 100vh;
            overflow: hidden;
            line-height: 1.6;
        }

        /* Sidebar */
        aside {
            width: 280px;
            background-color: var(--bg-nav);
            border-right: 1px solid var(--border);
            overflow-y: auto;
            padding: 2rem 1rem;
            flex-shrink: 0;
        }

        aside h1 {
            font-size: 1.25rem;
            font-weight: 700;
            margin-bottom: 2rem;
            color: var(--accent);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .nav-group { margin-bottom: 2rem; }
        .nav-group h3 {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--text-secondary);
            margin-bottom: 0.75rem;
            padding-left: 0.75rem;
        }

        .nav-link {
            display: block;
            padding: 0.5rem 0.75rem;
            color: var(--text-primary);
            text-decoration: none;
            border-radius: 0.375rem;
            font-size: 0.9rem;
            transition: background 0.2s;
            margin-bottom: 0.25rem;
        }

        .nav-link:hover { background-color: rgba(255,255,255,0.05); }
        .nav-link.active { background-color: rgba(56, 189, 248, 0.1); color: var(--accent); }

        /* Main Content */
        main {
            flex: 1;
            overflow-y: auto;
            padding: 3rem 4rem;
            scroll-behavior: smooth;
        }

        .container { max-width: 900px; margin: 0 auto; }

        section { margin-bottom: 4rem; scroll-margin-top: 2rem; }

        h2 { font-size: 2rem; margin-bottom: 1rem; border-bottom: 1px solid var(--border); padding-bottom: 0.5rem; }
        p { color: var(--text-secondary); margin-bottom: 1.5rem; }

        /* Endpoint Card */
        .endpoint {
            background-color: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 0.75rem;
            margin-bottom: 2rem;
            overflow: hidden;
        }

        .endpoint-header {
            padding: 1rem 1.5rem;
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            gap: 1rem;
            background: rgba(255,255,255,0.02);
        }

        .method {
            font-size: 0.75rem;
            font-weight: 700;
            padding: 0.25rem 0.75rem;
            border-radius: 0.25rem;
            text-transform: uppercase;
            min-width: 70px;
            text-align: center;
        }

        .method.GET { background-color: rgba(59, 130, 246, 0.2); color: var(--method-get); border: 1px solid var(--method-get); }
        .method.POST { background-color: rgba(34, 197, 94, 0.2); color: var(--method-post); border: 1px solid var(--method-post); }
        .method.PUT { background-color: rgba(245, 158, 11, 0.2); color: var(--method-put); border: 1px solid var(--method-put); }
        .method.DELETE { background-color: rgba(239, 68, 68, 0.2); color: var(--method-delete); border: 1px solid var(--method-delete); }

        .path { font-family: 'Courier New', monospace; font-weight: 600; font-size: 1.05rem; }
        .path span { color: var(--text-secondary); } /* Params */

        .endpoint-body { padding: 1.5rem; }
        .endpoint-title { font-size: 1.1rem; font-weight: 600; margin-bottom: 1rem; }
        
        .tabs { display: flex; gap: 1rem; margin-bottom: 1rem; border-bottom: 1px solid var(--border); }
        .tab {
            background: none; border: none; color: var(--text-secondary); 
            padding-bottom: 0.5rem; cursor: pointer; font-size: 0.9rem;
        }
        .tab.active { color: var(--accent); border-bottom: 2px solid var(--accent); }

        /* Code Blocks */
        pre {
            background-color: var(--code-bg);
            padding: 1rem;
            border-radius: 0.5rem;
            overflow-x: auto;
            font-size: 0.85rem;
            border: 1px solid var(--border);
        }
        code { font-family: 'Consolas', 'Monaco', monospace; color: #e2e8f0; }
        .key { color: #7dd3fc; }
        .string { color: #86efac; }
        .number { color: #fca5a5; }
        .boolean { color: #f9a8d4; }

        /* Type Definition Box */
        .type-def {
            background: rgba(56, 189, 248, 0.05);
            border: 1px dashed var(--accent);
            border-radius: 0.5rem;
            padding: 1rem;
            margin-bottom: 2rem;
        }
        .type-def h4 { color: var(--accent); margin-bottom: 0.5rem; font-size: 0.9rem; text-transform: uppercase; }

        @media (max-width: 768px) {
            body { flex-direction: column; overflow: auto; }
            aside { width: 100%; height: auto; border-right: none; border-bottom: 1px solid var(--border); }
            main { padding: 1.5rem; }
        }
    </style>
</head>
<body>

    <aside>
        <h1>API Docs <span style="font-size: 0.8rem; color: var(--text-secondary); font-weight: 400;">v1.0</span></h1>
        
        <nav>
            <div class="nav-group">
                <h3>Geral</h3>
                <a href="#intro" class="nav-link active">Visão Geral</a>
                <a href="#types" class="nav-link">Interfaces TypeScript</a>
            </div>
            <div class="nav-group">
                <h3>Auth</h3>
                <a href="#auth-login" class="nav-link">Login</a>
                <a href="#auth-recovery" class="nav-link">Recuperar Senha</a>
                <a href="#auth-reset" class="nav-link">Resetar Senha</a>
                <a href="#auth-session" class="nav-link">Sessão</a>
            </div>
            <div class="nav-group">
                <h3>Users</h3>
                <a href="#users-list" class="nav-link">Listar Usuários</a>
                <a href="#users-create" class="nav-link">Criar Usuário</a>
                <a href="#users-get" class="nav-link">Obter Usuário</a>
                <a href="#users-update" class="nav-link">Atualizar Usuário</a>
                <a href="#users-delete" class="nav-link">Deletar Usuário</a>
            </div>
            <div class="nav-group">
                <h3>Games</h3>
                <a href="#games-list" class="nav-link">Listar Games</a>
                <a href="#games-create" class="nav-link">Criar Game</a>
                <a href="#games-update" class="nav-link">Atualizar Game</a>
            </div>
            <div class="nav-group">
                <h3>Reviews</h3>
                <a href="#reviews-create" class="nav-link">Criar Review</a>
                <a href="#reviews-get" class="nav-link">Obter Review</a>
                <a href="#reviews-update" class="nav-link">Atualizar Review</a>
                <a href="#reviews-delete" class="nav-link">Deletar Review</a>
            </div>
        </nav>
    </aside>

    <main>
        <div class="container">
            
            <section id="intro">
                <h2>Visão Geral</h2>
                <p>Esta documentação descreve a API RESTful para gerenciamento de Jogos, Usuários e Avaliações. A API foi construída utilizando <strong>Node.js (Express)</strong> e <strong>TypeScript</strong>.</p>
                <p><strong>Base URL:</strong> <code>http://localhost:3000</code></p>
            </section>

            <section id="types">
                <h2>Interfaces TypeScript</h2>
                <p>Abaixo estão as definições de tipos inferidas para utilização no Frontend/Cliente.</p>

                <div class="type-def">
                    <h4>IUser</h4>
                    <pre><code>interface IUser {
  id?: string
  username: string
  email: string
  password_hash: string // Apenas no envio
  avatar?: string
  created_at?: Date
}</code></pre>
                </div>

                <div class="type-def">
                    <h4>IGame</h4>
                    <pre><code>interface IGame {
  id?: string
  title: string
  rating: number
  plataform: string
  first_release_date: string // ISO-8601
  storyline: string
  cover_url: string
  slug: string
  status: 'Jogando' | 'Zerado' | 'Platinado' | 'Abandonado'
  review?: string
}</code></pre>
                </div>
            </section>

            <hr style="border: 0; border-top: 1px solid var(--border); margin: 3rem 0;">

            <section id="auth">
                <h2 style="color: var(--accent);">Autenticação</h2>

                <div id="auth-login" class="endpoint">
                    <div class="endpoint-header">
                        <span class="method POST">POST</span>
                        <span class="path">/auth/login</span>
                    </div>
                    <div class="endpoint-body">
                        <div class="endpoint-title">Autenticar Usuário</div>
                        <p>Retorna o token JWT para acesso aos recursos protegidos.</p>
                        <h5>Request Body (application/json)</h5>
                        <pre><code class="json">{
  <span class="key">"email"</span>: <span class="string">"jose-guilherme93@hotmail.com"</span>,
  <span class="key">"password_hash"</span>: <span class="string">"15252rggsedfeeedfsedsf3etwewe3wewwwteee34"</span>
}</code></pre>
                    </div>
                </div>

                <div id="auth-recovery" class="endpoint">
                    <div class="endpoint-header">
                        <span class="method POST">POST</span>
                        <span class="path">/auth/recovery</span>
                    </div>
                    <div class="endpoint-body">
                        <div class="endpoint-title">Recuperação de Senha</div>
                        <p>Solicita um token de recuperação enviado por e-mail.</p>
                        <h5>Request Body</h5>
                        <pre><code class="json">{
  <span class="key">"email"</span>: <span class="string">"user25@example.com"</span>
}</code></pre>
                    </div>
                </div>

                <div id="auth-reset" class="endpoint">
                    <div class="endpoint-header">
                        <span class="method POST">POST</span>
                        <span class="path">/auth/reset-password/<span>?recoveryToken=...</span></span>
                    </div>
                    <div class="endpoint-body">
                        <div class="endpoint-title">Redefinir Senha</div>
                        <h5>Request Body</h5>
                        <pre><code class="json">{
  <span class="key">"password"</span>: <span class="string">"nova_senha_segura_123"</span>
}</code></pre>
                    </div>
                </div>

                 <div id="auth-session" class="endpoint">
                    <div class="endpoint-header">
                        <span class="method GET">GET</span>
                        <span class="path">/users/sessions/<span>:id</span></span>
                    </div>
                    <div class="endpoint-body">
                        <div class="endpoint-title">Obter Sessão</div>
                        <p>Requer Header: <code>Authorization: Bearer &lt;token&gt;</code></p>
                    </div>
                </div>
            </section>

            <section id="users">
                <h2 style="color: var(--accent);">Usuários</h2>

                <div id="users-list" class="endpoint">
                    <div class="endpoint-header">
                        <span class="method GET">GET</span>
                        <span class="path">/users</span>
                    </div>
                    <div class="endpoint-body">
                        <div class="endpoint-title">Listar Usuários</div>
                        <p>Pode aceitar filtros no corpo da requisição (não padrão REST) ou query params.</p>
                        <h5>Request Body (Opcional para filtro)</h5>
                        <pre><code class="json">{
  <span class="key">"email"</span>: <span class="string">"jods5ge-gui"</span>,
  <span class="key">"username"</span>: <span class="string">"helg5ldo"</span>
}</code></pre>
                    </div>
                </div>

                <div id="users-create" class="endpoint">
                    <div class="endpoint-header">
                        <span class="method POST">POST</span>
                        <span class="path">/users</span>
                    </div>
                    <div class="endpoint-body">
                        <div class="endpoint-title">Criar Usuário</div>
                        <h5>Request Body</h5>
                        <pre><code class="json">{
  <span class="key">"email"</span>: <span class="string">"user_new@gmail.com"</span>,
  <span class="key">"avatar"</span>: <span class="string">"https://url-to-avatar.com/img.png"</span>,
  <span class="key">"password_hash"</span>: <span class="string">"senha_secreta"</span>,
  <span class="key">"username"</span>: <span class="string">"new_player_01"</span>
}</code></pre>
                    </div>
                </div>

                <div id="users-update" class="endpoint">
                    <div class="endpoint-header">
                        <span class="method PUT">PUT</span>
                        <span class="path">/users/<span>:id</span></span>
                    </div>
                    <div class="endpoint-body">
                        <div class="endpoint-title">Atualizar Usuário</div>
                        <h5>Request Body</h5>
                        <pre><code class="json">{
  <span class="key">"email"</span>: <span class="string">"updated_email@gmail.com"</span>,
  <span class="key">"password_hash"</span>: <span class="string">"nova_hash_senha"</span>,
  <span class="key">"avatar"</span>: <span class="string">"https://new-avatar.com/img.jpg"</span>
}</code></pre>
                    </div>
                </div>

                <div id="users-delete" class="endpoint">
                    <div class="endpoint-header">
                        <span class="method DELETE">DELETE</span>
                        <span class="path">/users/<span>:id</span></span>
                    </div>
                    <div class="endpoint-body">
                        <div class="endpoint-title">Deletar Usuário</div>
                        <p>Remove permanentemente o registro do usuário.</p>
                    </div>
                </div>
            </section>

            <section id="games">
                <h2 style="color: var(--accent);">Games</h2>

                <div id="games-list" class="endpoint">
                    <div class="endpoint-header">
                        <span class="method GET">GET</span>
                        <span class="path">/games</span>
                    </div>
                    <div class="endpoint-body">
                        <div class="endpoint-title">Listar Games</div>
                        <p>Suporta paginação via query parameters.</p>
                        <p><strong>Query Params:</strong> <code>?limit=2&page=1</code></p>
                    </div>
                </div>

                <div id="games-create" class="endpoint">
                    <div class="endpoint-header">
                        <span class="method POST">POST</span>
                        <span class="path">/games</span>
                    </div>
                    <div class="endpoint-body">
                        <div class="endpoint-title">Cadastrar Game</div>
                        <h5>Request Body</h5>
                        <pre><code class="json">{
  <span class="key">"title"</span>: <span class="string">"God of War"</span>,
  <span class="key">"rating"</span>: <span class="number">9.5</span>,
  <span class="key">"plataform"</span>: <span class="string">"Playstation 4"</span>,
  <span class="key">"first_release_date"</span>: <span class="string">"2018-04-20T00:00:00.000Z"</span>,
  <span class="key">"storyline"</span>: <span class="string">"Kratos returns..."</span>,
  <span class="key">"cover_url"</span>: <span class="string">"http://..."</span>,
  <span class="key">"slug"</span>: <span class="string">"god-of-war-ps4"</span>,
  <span class="key">"status"</span>: <span class="string">"Zerado"</span>,
  <span class="key">"review"</span>: <span class="string">"Excelente jogo!"</span>
}</code></pre>
                    </div>
                </div>

                <div id="games-update" class="endpoint">
                    <div class="endpoint-header">
                        <span class="method PUT">PUT</span>
                        <span class="path">/games/<span>:id</span></span>
                    </div>
                    <div class="endpoint-body">
                        <div class="endpoint-title">Atualizar Game</div>
                        <h5>Request Body</h5>
                        <pre><code class="json">{
  <span class="key">"title"</span>: <span class="string">"God of War Ragnarok"</span>,
  <span class="key">"rating"</span>: <span class="number">10</span>,
  <span class="key">"status"</span>: <span class="string">"Platinado"</span>
}</code></pre>
                    </div>
                </div>
            </section>

             <section id="reviews">
                <h2 style="color: var(--accent);">Reviews</h2>

                <div id="reviews-create" class="endpoint">
                    <div class="endpoint-header">
                        <span class="method POST">POST</span>
                        <span class="path">/reviews</span>
                    </div>
                    <div class="endpoint-body">
                        <div class="endpoint-title">Criar Review</div>
                        <h5>Request Body</h5>
                        <pre><code class="json">{
  <span class="key">"game_id"</span>: <span class="string">"16"</span>,
  <span class="key">"user_id"</span>: <span class="string">"863331f5-..."</span>,
  <span class="key">"score"</span>: <span class="number">1</span>,
  <span class="key">"review_text"</span>: <span class="string">"Não gostei da jogabilidade..."</span>
}</code></pre>
                    </div>
                </div>

                <div id="reviews-get" class="endpoint">
                    <div class="endpoint-header">
                        <span class="method GET">GET</span>
                        <span class="path">/reviews/<span>:id</span></span>
                    </div>
                    <div class="endpoint-body">
                        <div class="endpoint-title">Obter Review por ID</div>
                    </div>
                </div>

                <div id="reviews-update" class="endpoint">
                    <div class="endpoint-header">
                        <span class="method PUT">PUT</span>
                        <span class="path">/reviews/<span>:userId/:gameId</span></span>
                    </div>
                    <div class="endpoint-body">
                        <div class="endpoint-title">Atualizar Review</div>
                        <p>Identificado pelo ID do usuário e ID do jogo.</p>
                        <h5>Request Body</h5>
                        <pre><code class="json">{
  <span class="key">"review_text"</span>: <span class="string">"Mudei de ideia, é bom."</span>,
  <span class="key">"score"</span>: <span class="number">2</span>
}</code></pre>
                    </div>
                </div>

                <div id="reviews-delete" class="endpoint">
                    <div class="endpoint-header">
                        <span class="method DELETE">DELETE</span>
                        <span class="path">/reviews/<span>:userId/:gameId</span></span>
                    </div>
                    <div class="endpoint-body">
                        <div class="endpoint-title">Deletar Review</div>
                    </div>
                </div>
            </section>

        </div>
    </main>

    <script>
        // Simple Active Link Handling
        document.addEventListener('DOMContentLoaded', () => {
            const links = document.querySelectorAll('.nav-link');
            
            links.forEach(link => {
                link.addEventListener('click', function() {
                    links.forEach(l => l.classList.remove('active'));
                    this.classList.add('active');
                });
            });

            // Smooth Scroll Offset for fixed header if we had one, 
            // but here purely for smooth active state update
            window.addEventListener('scroll', () => {
                let current = '';
                const sections = document.querySelectorAll('section, .endpoint');
                
                sections.forEach(section => {
                    const sectionTop = section.offsetTop;
                    if (scrollY >= sectionTop - 100) {
                        current = section.getAttribute('id');
                    }
                });

                if(current) {
                    links.forEach(link => {
                        link.classList.remove('active');
                        if(link.getAttribute('href').includes(current)) {
                            link.classList.add('active');
                        }
                    });
                }
            });
        });
    </script>
</body>
</html>